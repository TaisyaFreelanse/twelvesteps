import asyncio
import sys
import os

from sqlalchemy import select
from sqlalchemy.ext.asyncio import AsyncSession

from db.database import engine, async_session_factory, Base
from db.models import Step, Question

DATA = [
    {
        "step": {
            "index": 1,
            "title": "ШАГ ПЕРВЫЙ: Мы признали свое бессилие перед наркоманией, признали, что наша жизнь стала неуправляемой",
            "description": "У всего есть свое начало. Так и с шагами: Первый Шаг - это начало процесса выздоровления. Выздоровление начинается здесь.",
            "questions": [
                "Что для меня означает «болезнь зависимость»?",
                "Была ли моя болезнь активна в последнее время? Как именно?",
                "Что происходит, когда я одержим чем-либо? Следует ли мое мышление определенному шаблону?",
                "Когда мне в голову приходит какая-либо мысль, начинаю ли я действовать сразу, не принимая во внимание возможные последствия? Как еще проявляется компульсивность в моем поведении?",
                "Каким образом такая сторона моей болезни, как эгоцентризм, влияет на мою жизнь и на жизнь окружающих?",
                "Как моя болезнь повлияла на меня в физическом плане? Умственном? Духовном? Эмоциональном?",
                "Каким именно было самое недавнее проявление моей зависимости?",
                "Был ли я одержим каким-либо человеком, местом или вещью? Если да, то как это повлияло на мои отношения с другими людьми? Как еще эта одержимость повлияла на меня в умственном, физическом, духовном и эмоциональном плане?",
                "Давал ли я правдоподобные, но не соответствующие действительности объяснения своему поведению? Какие?",
                "Совершал ли я компульсивные поступки под влиянием одержимости, а затем вел себя так, будто именно это я и планировал?",
                "Как именно я перекладывал вину за свое поведение на других людей?",
                "Сравнивал ли я свою зависимость с зависимостью других? Осознаю ли я, что моя зависимость достаточно очевидна, если не провожу такого сравнения?",
                "Сравниваю ли я сегодняшние проявления своей зависимости с тем, какой была моя жизнь до того, как я стал чистым? Не гнетет ли меня мысль о том, что я должен уже стать лучше?",
                "Не думаю ли я, что знаю о зависимости и выздоровлении достаточно, для того чтобы взять себя в руки прежде, чем мое поведение выйдет из- под контроля?",
                "Не уклоняюсь ли я от действий, потому что боюсь, что мне будет стыдно, когда я увижу последствия своей зависимости? Не уклоняюсь ли я от действий, потому что боюсь того, что подумают другие?",
                "Какой кризис побудил меня начать выздоравливать?",
                "Какая ситуация подвела меня к тому, чтобы приступить к работе по Первому Шагу?",
                "Когда я впервые понял, что моя зависимость является проблемой? Пытался ли я решить ее? Если да, то как? Если нет, то почему?",
                "Перед чем именно я бессилен?",
                "Находясь под влиянием зависимости, я совершал поступки, которые никогда бы не совершил, если бы был сосредоточен на выздоровлении. Что это были за поступки?",
                "Какие поступки, идущие абсолютно вразрез со всеми моими ценностями и убеждениями, я совершал, поддерживая свою зависимость?",
                "Как меняется моя личность, когда я действую под влиянием зависимости? Например: становлюсь ли я высокомерным? Эгоцентричным? Злым? Пассивным, причем настолько, что не могу даже постоять за себя? Манипулирующим? Ноющим?",
                "Манипулирую ли я другими людьми, поддерживая свою зависимость? Как именно?",
                "Бывало ли так, что я пытался бросить употреблять и понимал, что не могу? Бывало ли так, что я самостоятельно прекращал употреблять, а потом понимал, что жизнь без наркотиков настолько полна боли, что мое воздержание быстро заканчивалось?",
                "Как моя зависимость заставляла меня причинять ущерб себе или другим?",
                "Что для меня означает неуправляемость?",
                "Арестовывали ли меня когда-нибудь? Были ли у меня проблемы с законом из-за моей зависимости? Делал ли я когда-нибудь что-то, за что меня могли арестовать, если бы поймали? Что именно?",
                "Какие неприятности из-за моей зависимости были у меня на работе или на учебе?",
                "Какие неприятности из-за моей зависимости были у меня в семье?",
                "Какие неприятности из-за моей зависимости были у меня с моими друзьями?",
                "Настаиваю ли я на том, чтобы все было по-моему? Как подобная настойчивость отразилась на моих отношениях с другими людьми?",
                "Принимаю ли я во внимание потребности других людей? Как недостаток внимания к другим людям повлиял на мои отношения с ними?",
                "Принимаю ли я ответственность за свою жизнь и свои поступки? В состоянии ли я справиться со своими повседневными делами без перенапряжения? Если нет, то как это влияет на мою жизнь?",
                "Опускаются ли у меня руки, как только все начинает идти не по плану? Как это влияет на мою жизнь?",
                "Воспринимаю ли я любые возникающие сложности как личное оскорбление? Как это влияет на мою жизнь?",
                "Свойственно ли мне катастрофическое мышление, из-за которого я реагирую панически на любую ситуацию? Как это влияет на мою жизнь?",
                "Игнорирую ли я признаки серьезных проблем с моим здоровьем или с моими детьми, думая, что все как-нибудь наладится само собой?",
                "Бывало ли так, что из-за своей зависимости я бездействовал в момент реальной опасности или был не в состоянии защитить себя от нее?",
                "Причинял ли я кому-нибудь вред из-за своей зависимости?",
                "Бывают ли у меня приступы ярости или другие неадекватные реакции на мои чувства, ведущие к потере самоуважения или чувства собственного достоинства?",
                "Бывало ли так, что я принимал наркотики или действовал под влиянием зависимости, чтобы изменить или подавить свои чувства? Какие именно чувства я пытался изменить или подавить?",
                "Принимаю ли я всю серьезность своей болезни?",
                "Думаю ли я, что могу продолжать общаться с людьми, связанными с моей зависимостью? Могу ли я по-прежнему посещать места, где я употреблял? Разумно ли, с моей точки зрения, хранить наркотики или принадлежности для их употребления просто «на память» или чтобы проверять свое выздоровление на прочность? Если да, то почему?",
                "Есть ли что-то, с чем, как мне кажется, я не смогу справиться чистым, например, какое-то событие, настолько болезненное, что мне придется употребить, чтобы пережить боль?",
                "Думаю ли я, что на определенном сроке чистоты или при других жизненных обстоятельствах я смогу контролировать употребление?",
                "За какие оговорки я все еще цепляюсь?",
                "Пугает ли меня что-либо в концепции капитуляции?",
                "Что убеждает меня в том, что я больше не могу употреблять без последствий?",
                "Принимаю ли я тот факт, что никогда не смогу вернуть контроль над употреблением даже после длительного периода воздержания?",
                "Могу ли я начать выздоравливать без полной капитуляции?",
                "Какой была бы моя жизнь, если бы я капитулировал полностью?",
                "Могу ли я продолжать выздоравливать без полной капитуляции?",
                "Если я думаю об употреблении или как-то еще поступаю под влиянием зависимости, делюсь ли я этим со спонсором или с кем-нибудь еще?",
                "Осознаю ли я то, что моя болезнь реальна, независимо от того, как долго я уже свободен от активной зависимости?",
                "Заметил ли я, что теперь, когда мне не нужно скрывать свою зависимость, у меня исчезла потребность врать, как раньше? Ценю ли я свободу, которую обрел в результате этого? Каким образом я начал применять честность в своем выздоровлении?",
                "Слышал ли я за время своего выздоровления о чем-то таком, во что мне сложно поверить? Просил ли я своего спонсора или человека, от которого я это услышал, объяснить мне это?",
                "Каким образом я практикую принцип открытости новому?",
                "Готов ли я следовать рекомендациям моего спонсора?",
                "Готов ли я посещать собрания регулярно?",
                "Готов ли я приложить максимум усилий для выздоровления? Как именно?",
                "Считаю ли я, что я чудовище, которое отравляет своей зависимостью весь мир? Или что моя зависимость вообще никак не сказывается на окружающих? Или правда находится где-то посредине?",
                "Есть ли у меня чувство, что я важен для моей семьи и друзей? А для общества в целом?",
                "Как я практикую принцип смирения, работая по Первому Шагу?",
                "Примирился ли я с тем фактом, что я зависимый?",
                "Примирился ли я с тем, что мне придется выполнять определенные действия, чтобы оставаться чистым?",
                "Почему принятие моей болезни необходимо для того, чтобы продолжать выздоравливать?",
                "Как я могу понять, что пора двигаться дальше?",
                "Как я понимаю Первый Шаг?",
                "Как мои прежние знания и опыт повлияли на мою работу по этому шагу?",
            ]
        }
    },
    {
        "step": {
            "index": 2,
            "title": "ШАГ ВТОРОЙ: Мы пришли к убеждению, что сила, более могущественная, чем мы, может вернуть нам здравомыслие",
            "description": "Второй Шаг помогает нам осознать, что вне нас существует сила, способная помочь. Мы начинаем верить в возможность перемен.",
            "questions": [
                "Какие надежды есть у меня сегодня?",
                "Верил ли я, что могу контролировать свое употребление? Какие именно попытки контроля я предпринимал, и в чем заключалась их безуспешность?",
                "Что я делал такого, во что мне верится с трудом сейчас, когда я вспоминаю об этом? Подвергал ли я себя опасности, пытаясь достать наркотики? Вел ли я себя так, что теперь мне за это стыдно? Что это были за ситуации?",
                "Принимал ли я безумные решения из-за своей зависимости? Бросал ли я работу, друзей, другие отношения, или отказывался от своих целей только лишь потому, что это мешало моему употреблению?",
                "Наносил ли я когда-нибудь в своей зависимости физические увечья себе или кому-нибудь еще?",
                "Каким образом я чрезмерно или недостаточно реагировал на что-либо?",
                "На что похожа моя жизнь, когда в ней нет баланса?",
                "Каким образом мое безумие рассказывает мне, что нечто внешнее - употребление наркотиков, азартные игры, еда, погоня за сексом или что-то еще - может сделать меня целостной личностью или решить все мои проблемы?",
                "Является ли частью моего безумия убежденность в том, что симптом моей зависимости, например употребление наркотиков или какое-то иное проявление, - это моя единственная проблема?",
                "Что мы чувствовали и о чем думали, перед тем как начать действовать под влиянием одержимости, несмотря на ясное понимание последствий? Что именно заставило нас начать действовать?",
                "Есть ли у меня какие-нибудь страхи, связанные с приходом к убеждению? Какие именно?",
                "Есть ли еще какие-либо преграды, которые мешают мне прийти к убеждению? Какие именно?",
                "Что значит для меня фраза «мы пришли к убеждению»?",
                "Верил ли я когда-нибудь во что-то, не имея очевидных доказательств? Опиши свой опыт.",
                "О каком опыте прихода к убеждению я слышал от других выздоравливающих зависимых? Пробовал ли я применить что-то из услышанного в своей жизни?",
                "Во что я верю?",
                "Насколько выросла моя вера с тех пор, как я начал выздоравливать?",
                "Есть ли у меня сложности с принятием того, что существует Сила или Силы, более могущественные, чем я сам?",
                "Какие примеры того, что сильнее меня, я могу привести?",
                "Способна ли Сила, более могущественная, чем я сам, помочь мне оставаться чистым? Как именно?",
                "Может ли Сила, более могущественная, чем я сам, помочь мне выздоравливать? Как именно?",
                "Какие у меня есть свидетельства того, что Высшая Сила работает в моей жизни?",
                "Каких качеств нет у моей Высшей Силы?",
                "Какие качества есть у моей Высшей Силы?",
                "Какие примеры того, что я считаю здравомыслием, я могу привести?",
                "Какие изменения в моем мышлении и поведении необходимы для моего возвращения к здравомыслию?",
                "В каких сферах моей жизни мне сейчас необходимо здравомыслие?",
                "Почему возвращение к здравомыслию - это процесс?",
                "Как работа по остальным шагам может помочь моему возвращению к здравомыслию?",
                "Какие примеры того, что я уже возвращаюсь к здравомыслию в своем выздоровлении, я могу привести?",
                "Каковы мои ожидания относительно возвращения к здравомыслию? Они реалистичны или нереалистичны?",
                "Подтверждаются ли мои реалистичные ожидания относительно прогресса в выздоровлении? Понимаю ли я, что выздоровление происходит постепенно, а не за один день?",
                "Когда мы понимаем, что в состоянии поступить здраво хотя бы один раз в той ситуации, с которой раньше никогда не справлялись, это и будет свидетельством здравомыслия. Случались ли в моем выздоровлении подобные ситуации? Опиши их.",
                "Почему предубежденность вредна для моего выздоровления?",
                "Как я демонстрирую открытость новому в своей жизни сегодня?",
                "Как именно изменилась моя жизнь с тех пор, как я начал выздоравливать? Верю ли я в возможность еще больших перемен?",
                "Что я готов делать для того, чтобы вернуться к здравомыслию?",
                "Есть ли у меня сейчас готовность делать что-то, к чему я не был готов раньше? Что именно?",
                "Какие действия, подтверждающие мою веру, я уже совершаю?",
                "Как выросла моя вера?",
                "Удавалось ли мне строить планы с верой в то, что моя зависимость не помешает мне их осуществить?",
                "Какие страхи мешают моему доверию?",
                "Что мне необходимо делать, чтобы избавиться от этих страхов?",
                "Какие мои действия свидетельствуют о том, что я доверяю процессу выздоровления и Силе, более могущественной, чем я сам?",
                "Просил ли я сегодня помощи у Силы, более могущественной, чем я сам? Как именно?",
                "Обращался ли я за помощью к спонсору или к другим выздоравливающим зависимым, посещал ли собрания? Каковы были результаты?",
                "Какие действия могут мне помочь в процессе прихода к убеждению?",
                "Есть ли у меня нереалистичные ожидания относительно возвращения к здравомыслию? Что я делаю, чтобы их преодолеть?",
                "Как я понимаю Второй Шаг?",
                "Как мои прежние знания и опыт повлияли на мою работу по этому шагу?",
            ]
        }
    },
    {
        "step": {
            "index": 3,
            "title": "ШАГ ТРЕТИЙ: Мы приняли решение препоручить свою волю и свою жизнь заботе Бога, как мы Его понимаем",
            "description": "Третий Шаг — это решение. Мы принимаем решение позволить Высшей Силе направлять нашу жизнь.",
            "questions": [
                "Почему принятие решения является ключевым аспектом работы по этому шагу?",
                "Могу ли я принять это решение только сегодня? Есть ли у меня какие-то страхи или оговорки на этот счет? Какие именно?",
                "Какие действия я совершаю, чтобы следовать своему решению?",
                "Какие сферы моей жизни мне трудно препоручать? Почему важно, чтобы я их все равно препоручал?",
                "Как я действовал под влиянием своеволия? Каковы были мои мотивы?",
                "Как своеволие повлияло на мою жизнь?",
                "Как мое своеволие повлияло на других?",
                "Могу ли я навредить кому-то, добиваясь своих целей? Каким образом?",
                "Есть ли вероятность, что, добиваясь желаемого, я своими действиями в итоге стану наносить ущерб себе или окружающим? Каким образом?",
                "Буду ли я должен поступиться каким-либо из своих принципов для достижения этих целей (например, предать, проявить нечестность или жестокость)?",
                "Бывали ли случаи, когда моей воли было недостаточно, например, я не мог оставаться чистым по своей воле?",
                "В чем разница между моей волей и волей Бога?",
                "Были ли случаи в моем выздоровлении, когда я понимал, что понемногу забираю обратно свою волю и свою жизнь? Благодаря чему я это понимал? Что я делал, чтобы вернуться к своему решению Третьего Шага?",
                "Вызывает ли у меня дискомфорт слово «Бог» или само это понятие? В чем причина этого дискомфорта?",
                "Думал ли я когда-нибудь, что Бог наказывает меня или насылает на меня несчастья? Что это были за ситуации?",
                "Каково мое сегодняшнее понимание Силы, более могущественной, чем я сам?",
                "Как Высшая Сила работает в моей жизни?",
                "Как я общаюсь с моей Высшей Силой?",
                "Как моя Высшая Сила общается со мной?",
                "Какие чувства я испытываю по отношению к моей Высшей Силе?",
                "Сопротивляюсь ли я изменению моих представлений о природе Высшей Силы? Каким образом?",
                "Работает ли еще моя сегодняшняя концепция Высшей Силы?",
                "Возможно, ей не помешало бы измениться? Каким образом?",
                "Что для меня означает слово «забота»?",
                "Что для меня значит препоручить мою волю и мою жизнь заботе Бога моего понимания?",
                "Как могла бы измениться моя жизнь, если я принимаю решение препоручить ее заботе Высшей Силы?",
                "Как я позволяю Высшей Силе работать в моей жизни?",
                "Как Высшая Сила заботится о моей воле и моей жизни?",
                "Были ли случаи, когда я был не способен отпустить и доверить Богу заботу о результате в конкретной ситуации?",
                "Были ли случаи, когда я был способен отпустить и доверить Богу заботу о результате?",
                "Какие действия я совершаю для препоручения? Есть ли какие-то слова, которые я произношу регулярно? Какие именно?",
                "Что я делаю для того, чтобы укрепить свое решение позволить Высшей Силе заботиться о моей воле и моей жизни?",
                "Каким образом Третий Шаг позволяет мне развить принцип капитуляции, который у меня появился в Первом и Втором Шаге?",
                "Каким образом я уже продемонстрировал готовность в своем выздоровлении?",
                "Борюсь ли я с чем-то в своем выздоровлении? Что, по моему мнению, случится, если я обрету готовность и позволю выздоровлению преобладать в этой сфере моей жизни?",
                "Каким образом надежда, вера и доверие стали позитивными силами в моей жизни? Какие еще действия я могу совершить для применения принципов надежды, веры и доверия в моем выздоровлении?",
                "Какими действиями я демонстрировал свою приверженность выздоровлению и работе по программе в последнее время? (Например: есть ли у меня служение в Анонимных Наркоманах? Являюсь ли я спонсором другого выздоравливающего зависимого? Продолжаю ли я, несмотря ни на что, ходить на собрания? Продолжаю ли я работать со своим спонсором даже после того, как он сообщил мне неприятную правду или дал рекомендации, которым я не хотел следовать? Следую ли я этим рекомендациям?)",
                "Существуют ли у меня какие-либо оговорки относительно решения препоручить мою волю и жизнь заботе Бога?",
                "Чувствую ли я, что теперь я готов их препоручить?",
                "Как моя капитуляция Первого Шага помогает мне в Третьем шаге?",
                "Какие действия я собираюсь предпринять для того, чтобы и дальше следовать принятому мною решению? Как работа по остальным Шагам может мне в этом помочь?",
                "Какие есть доказательства того, что я могу полностью довериться процессу выздоровления?",
            ]
        }
    },
    {
        "step": {
            "index": 4,
            "title": "ШАГ ЧЕТВЁРТЫЙ: Мы произвели глубокую и бесстрашную нравственную инвентаризацию самих себя",
            "description": "Четвёртый Шаг — это честный взгляд на себя. Мы исследуем свой характер, поведение и мотивы.",
            "questions": [
                "Есть ли у меня какие-либо оговорки относительно работы по этому шагу? Какие именно?",
                "Какую пользу я смогу получить от глубокой и бесстрашной нравственной инвентаризации самого себя?",
                "Почему мне не стоит откладывать работу по этому шагу?",
                "Какую пользу я получу, если не буду откладывать эту работу на потом?",
                "Боюсь ли я работать по этому шагу? Чего именно я боюсь?",
                "Что значит для меня «глубоко и бесстрашно»?",
                "Работаю ли я со своим спонсором? Общаюсь ли я с другими зависимыми? Какие еще действия я предпринимаю, чтобы быть уверенным, что я смогу справиться со всем тем, что откроет эта инвентаризация?",
                "Беспокоит ли меня слово «нравственный»? Если да, то почему?",
                "Беспокоят ли меня мысли о том, что ожидает от меня общество? Не боюсь ли я, что не могу и никогда не смогу соответствовать этим ожиданиям?",
                "Какие ценности и принципы важны лично для меня?",
                "Каким образом мое решение работать по Четвертому Шагу является свидетельством мужества, доверия, веры, честности и готовности?",
                "На кого я обижен?",
                "На какие учреждения (образовательные, правительственные, религиозные, исправительные, общественные) я обижен?",
                "Какие мотивы или убеждения побудили меня действовать в этих ситуациях именно так, как я действовал?",
                "Как моя нечестность способствовала моим обидам?",
                "Как неспособность или неготовность проживать определенные чувства привели меня к вынашиванию обид?",
                "Каким образом мое поведение способствовало моим обидам?",
                "Боюсь ли я увидеть свою сторону в ситуациях, которые послужили причиной моих обид? Если да, то почему?",
                "Как мои обиды повлияли на мои отношения с самим собой, другими людьми и Высшей Силой?",
                "Какие повторяющиеся темы я замечаю в своих обидах?",
                "Как я распознаю свои чувства?",
                "Какие чувства мне сложнее всего разрешить себе испытывать?",
                "Почему я пытался заглушать свои чувства?",
                "Какие способы я использовал для отрицания того, как я себя чувствовал на самом деле?",
                "Кем или чем было вызвано то или иное чувство? Что это было за чувство? В каких ситуациях я его испытывал? Какова была моя роль в каждой из этих ситуаций?",
                "Какие мотивы или убеждения побудили меня действовать в этих ситуациях именно так, как я действовал?",
                "Что я делаю со своими чувствами после того, как мне удается их распознать?",
                "Кто или что заставляет меня чувствовать вину или стыд?",
                "Какие из этих ситуаций вызвали у меня чувство стыда, несмотря на то что я не являлся их непосредственной причиной?",
                "Что двигало мной в ситуациях, где действительно была моя роль, какие мотивы и убеждения заставили меня действовать именно так, а не иначе?",
                "Каким образом мое поведение способствовало появлению у меня вины и стыда?",
                "Кого или чего я боюсь? Почему?",
                "Что я делаю, чтобы скрыть свой страх?",
                "Какими негативными или деструктивными способами я реагирую на свои страхи?",
                "Что я больше всего боюсь увидеть в себе и показать другим? Что, как мне кажется, произойдет, если я сделаю это?",
                "Как я обманываю сам себя из-за своего страха?",
                "Какие внутренние конфликты моей личности мешают мне поддерживать дружеские и/или романтические отношения?",
                "Как страх того, что мне причинят боль, влияет на мои дружеские и романтические отношения?",
                "Как я жертвовал дружбой ради романтических отношений?",
                "Каким образом я компульсивно искал отношений?",
                "Бывает ли так, что в отношениях с семьей мне иногда кажется, что мы движемся по замкнутому кругу и следуем одним и тем же сценариям поведения безо всякой надежды на перемены? Что это за сценарии? Какова моя роль в их повторении?",
                "Каким образом я избегал близости в отношениях с друзьями, партнерами, супругами и семьей?",
                "Было ли мне сложно брать на себя обязательства?",
                "Разрушал ли я когда-либо отношения, думая, что мне так или иначе причинят боль, поэтому лучше их прекратить до того, как это произойдет?",
                "В какой мере я считаюсь с чувствами других людей в моих отношениях с ними? Так же, как со своими чувствами? Считаю, что они важнее моих? Или менее важны? Или вообще не считаюсь?",
                "Чувствовал ли я себя жертвой в каких-либо отношениях?",
                "Какими были мои отношения с соседями? Заметил ли я какие-либо сценарии в своем поведении, которые повторялись снова и снова независимо от того, где я жил?",
                "Что я чувствую по отношению к людям, с которыми и на которых я работал?",
                "Как мой образ мышления, поведение и представления создавали мне проблемы на работе?",
                "Что я чувствую по отношению к людям, с которыми я учился (в детстве и в настоящее время)? Чувствовал ли я, что я хуже или лучше, чем другие учащиеся? Думал ли я, что должен соперничать с ними за расположение преподавателя? Относился ли я с уважением к руководству или бунтовал против него?",
                "Состоял ли я когда-нибудь в клубах или добровольных организациях? (Подсказка. АН - это добровольная организация). Что я чувствовал по отношению к людям в клубе или организации? Заводил ли я друзей в этих организациях? Случалось ли мне вступать в клуб, имея большие ожидания, только чтобы вскоре перестать посещать его? Какие у меня были ожидания и почему они не оправдывались? Какова была моя роль в этих ситуациях?",
                "Был ли я когда-нибудь в психиатрической лечебнице, тюрьме или других местах, где меня держали против моей воли? Как это повлияло на мою личность? Как я взаимодействовал с персоналом этого учреждения? Следовал ли я правилам? Случалось ли мне нарушать правила, а затем злиться на персонал, когда меня ловили на этом?",
                "Причиняли ли мне боль мои ранние попытки вступить в доверительные и близкие отношения? Послужило ли это причиной того, что я избегаю близости?",
                "Случалось ли мне прекращать отношения, хотя была возможность для разрешения конфликтов и преодоления проблем? Почему?",
                "Становился ли я другим человеком в зависимости от окружения?",
                "Случалось ли так, что я открывал в своем характере черты, которые мне не нравились (возможно, в предыдущей инвентаризации), а затем ловил себя на том, что пытаюсь их как-то компенсировать?",
                "Какие дефекты чаще всего проявляются в моих отношениях с другими людьми (нечестность, эгоизм, склонность к контролю, манипуляциям и т. д.)?",
                "Как я могу изменить свое поведение, чтобы начать здоровые отношения?",
                "Были ли у меня какие-либо отношения с Высшей Силой? Как они менялись в течение моей жизни? Каковы мои отношения с Высшей Силой сейчас?",
                "Каким образом мое сексуальное поведение основывалось на эгоизме?",
                "Не путал ли я секс с любовью? К чему приводили мои действия, основанные на этом заблуждении?",
                "Как я использовал секс, пытаясь избежать одиночества или заполнить духовную пустоту?",
                "Каким образом я компульсивно искал или, напротив, избегал секса?",
                "Был ли у меня сексуальный опыт, после которого я испытывал стыд и чувство вины? Что это был за опыт? Почему у меня возникли эти чувства?",
                "Были ли случаи в моем сексуальном опыте, когда я причинял боль себе или другим?",
                "Комфортно ли мне с моей сексуальностью? Если нет, то почему?",
                "Комфортно ли мне с сексуальностью других людей? Если нет, то почему?",
                "Является ли секс необходимым условием для всех или большинства моих отношений?",
                "Как я понимаю здоровые отношения?",
                "Совершали ли когда-либо надо мной насилие? Кто именно? Какие чувства я испытывал тогда или испытываю сейчас?",
                "Повлияло ли это на мои отношения с другими людьми? Каким образом?",
                "Если я чувствую себя жертвой на протяжении всей своей жизни из-за насилия в детстве, то какие действия я могу предпринять для того, чтобы восстановить свою духовную целостность? Может ли мне помочь в этом Высшая Сила? Каким образом?",
                "Совершал ли я насилие по отношению к кому-либо? К кому и как именно?",
                "Что я чувствовал и какие у меня были мысли непосредственно перед тем, как причинить ущерб?",
                "Обвинял ли я свою жертву? Оправдывал ли я свое поведение?",
                "Доверяю ли я своей Высшей Силе действовать в моей жизни и дать мне все, что необходимо, чтобы мне больше никогда не пришлось никому причинять ущерб? Готов ли я жить с болезненными чувствами до тех пор, пока они не изменятся благодаря работе по шагам?",
                "Какие у меня есть качества, которые мне нравятся? Какие мои качества нравятся другим? Какие из них приносят мне пользу?",
                "Как я забочусь о себе и о других?",
                "Какие духовные принципы я практикую в своей жизни? Как это меняет мою жизнь?",
                "Как выросла моя вера в Высшую Силу и мое доверие к ней?",
                "На чем основаны мои отношения со спонсором? Как я применяю этот положительный опыт в других отношениях?",
                "Каких целей я уже достиг? Есть ли у меня цели, к которым я стремлюсь сейчас? Что это за цели, и какие действия я совершаю для того, чтобы их достичь?",
                "Какие ценности у меня есть? Каких из них я твердо придерживаюсь в своей жизни? Как именно я это делаю?",
                "Как я выражаю благодарность за мое выздоровление?",
                "Остались ли у меня секреты, о которых я еще не написал? Какие именно? Еще один вопрос, который нам стоит задать себе сейчас - нет ли в этой инвентаризации чего-то, что является преувеличением или вообще неправдой?",
                "Есть ли в этой инвентаризации что-то, что не является правдой? Или какие-то выдуманные истории, которые я рассказывал уже много раз?",
            ]
        }
    },
    {
        "step": {
            "index": 5,
            "title": "ШАГ ПЯТЫЙ: Мы признали перед Богом, собой и каким-либо другим человеком истинную природу наших заблуждений",
            "description": "Пятый Шаг — это честное признание. Мы делимся своей инвентаризацией с Высшей Силой и доверенным человеком.",
            "questions": [
                "Какие у меня есть оговорки относительно работы по Пятому Шагу?",
                "Есть ли у меня сегодня какие-либо страхи?",
                "Что я делаю для того, чтобы справиться со своими страхами, связанными с работой по Пятому Шагу?",
                "Как работа по первым четырем шагам подготовила меня к работе по Пятому Шагу?",
                "Каким образом я собираюсь пригласить Бога моего понимания в свой Пятый Шаг?",
                "Как работа по Пятому Шагу вновь подтверждает мое решение Третьего Шага?",
                "Могу ли я признать и принять истинную сущность своих ошибок?",
                "Как изменится моя жизнь после этого признания?",
                "Какие качества привлекают меня в человеке, которого я выбираю своим слушателем?",
                "Каким образом наличие у него этих качеств поможет мне более эффективно сделать мое признание?",
                "Готов ли я доверять человеку, который будет слушать мой Пятый Шаг?",
                "Чего я ожидаю от этого человека?",
                "Каким образом работа по Пятому Шагу поможет мне начать строить отношения по-новому?",
                "В чем разница между истинной сущностью моих ошибок и моими действиями?",
                "Почему мне нужно признать истинную сущность моих ошибок, а не только сами ошибки?",
                "Верю ли я, что работа по Пятому Шагу сделает мою жизнь лучше?",
                "Какие способы обретения мужества для работы по этому Шагу я знаю?",
                "Как применение принципа мужества на практике в работе по этому Шагу влияет на все мое выздоровление?",
                "Договорился ли я о том, когда и где я буду делать свой Пятый Шаг?",
                "Как я избегал честности перед собой в прошлом?",
                "Каким образом более реалистичный взгляд на себя связан со смирением?",
                "Как применение принципа честности перед собой помогает мне принимать себя?",
                "Укрепится ли моя приверженность программе АН после того, как я поделюсь своей инвентаризацией со спонсором?",
                "Как работа над Пятым Шагом углубила мое смирение и принятие себя?",
                "Как в результате работы по Пятому Шагу изменились мои отношения с Высшей Силой?",
                "Как в результате работы по Пятому Шагу изменились мои отношения со спонсором?",
                "Как изменилось мое восприятие себя в результате работы по этому шагу?",
                "В какой степени я развил любовь и сострадание к себе и другим?",
            ]
        }
    },
    {
        "step": {
            "index": 6,
            "title": "ШАГ ШЕСТОЙ: Мы полностью подготовились к тому, чтобы Бог избавил нас от всех этих дефектов характера",
            "description": "Шестой Шаг — это готовность к изменениям. Мы готовимся отпустить то, что нам мешает.",
            "questions": [
                "Есть ли в моем характере какие-то черты, которые мне нравятся, но, возможно, являются дефектами? Не боюсь ли я, что перестану себе нравиться, если буду от них избавлен?",
                "Что именно, как мне кажется, я потеряю после устранения этих дефектов?",
                "Верю ли я по-прежнему в процесс выздоровления? Верю ли я, что смогу измениться? Какие изменения во мне уже произошли? Какие дефекты уже перестали влиять на мое поведение?",
                "Какие из моих дефектов, как мне кажется, никогда не смогут быть устранены? Почему я так думаю?",
                "Как я пытаюсь избавиться от дефектов своего характера или контролировать их? Каковы результаты моих попыток?",
                "В чем разница между полной готовностью к тому, чтобы Бог избавил меня от дефектов моего характера, и попытками подавить их самостоятельно?",
                "Как я укрепляю доверие Богу моего понимания, работая по этому шагу?",
                "Как в этом шаге углубляется моя капитуляция?",
                "Какими действиями я могу продемонстрировать свою полную готовность?",
                "Составь список всех своих дефектов и дай каждому из них краткое определение",
                "Каким образом я действую под влиянием этого дефекта?",
                "Как подобное поведение отражается на мне самом и на окружающих?",
                "Что я чувствую, поступая под влиянием данного дефекта? Пытаюсь ли я подавить определенные чувства, действуя под его влиянием?",
                "Какой была бы моя жизнь, если бы я не поступал под влиянием этого дефекта? Какой духовный принцип я могу применить вместо него?",
                "Как я демонстрирую свою приверженность выздоровлению сегодня?",
                "Работая по первым пяти шагам, я научился быть настойчивым в своем выздоровлении. Почему это качество жизненно необходимо в Шестом Шаге?",
                "Готов ли я к тому, чтобы меня избавили от всех моих дефектов характера прямо сейчас? Если нет, то почему?",
                "Что я сегодня сделал, чтобы показать свою готовность?",
                "Насколько еще силен мой страх того, каким я могу стать, работая по этому шагу? Уменьшился ли мой страх с тех пор, как я начал по нему работать?",
                "Как я укрепляю доверие Богу моего понимания, работая по этому шагу?",
                "Принимаю ли я себя сегодня? Что мне в себе нравится? Что изменилось во мне с тех пор, как я начал работать по шагам?",
                "Как я вижу себя с теми качествами, которые хотел бы обрести? Как я буду строить свою карьеру? Чем буду заниматься в свободное время? Каким я буду родителем, ребенком, партнером или другом? Опиши подробно",
            ]
        }
    },
    {
        "step": {
            "index": 7,
            "title": "ШАГ СЕДЬМОЙ: Мы смиренно попросили Его избавить нас от наших недостатков",
            "description": "Седьмой Шаг — это просьба о помощи. Мы просим Высшую Силу помочь нам измениться.",
            "questions": [
                "Какие из моих представлений о себе изменились с тех пор, как я начал выздоравливать?",
                "Как смирение влияет на мое выздоровление?",
                "Как осознание собственного смирения помогает мне в работе над этим шагом?",
                "Как мое понимание Высшей Силы росло в предыдущих шагах?",
                "Как моя работа по предыдущим шагам подготовила меня к работе по Седьмому Шагу?",
                "Как я буду просить Бога моего понимания избавить меня от недостатков?",
                "Могут ли другие выздоравливающие зависимые помочь мне понять, как нужно об этом просить? Просил ли я их поделиться со мной опытом, силами и надеждой? Просил ли я о руководстве своего спонсора?",
                "Как проявляется духовный принцип капитуляции, когда мы уступаем дорогу для того, чтобы Высшая Сила работала в нашей жизни?",
                "Какая польза может быть от того, что я позволю Высшей Силе работать в моей жизни?",
                "Что я чувствую, зная, что Высшая Сила заботится обо мне и работает в моей жизни?",
                "Принял ли я бессилие перед своими недостатками так же, как и перед своей зависимостью?",
                "Насколько глубже стала моя капитуляция?",
                "Верю ли я, что моя Высшая Сила избавит меня от недостатков или дарует мне свободу от компульсивного поведения под влиянием этих недостатков?",
                "Верю ли я, что стану лучше в результате работы по этому шагу?",
                "Как моя вера в Бога моего понимания укрепляется в результате работы по этому шагу?",
                "Где у меня были возможности для роста в последнее время? Как я ими воспользовался?",
                "Верю ли я, что только Высшая Сила может избавить меня от недостатков? Или я пытаюсь избавиться от них самостоятельно?",
                "Становлюсь ли я нетерпеливым, видя, что мои недостатки не исчезли сразу, как только я попросил об этом? Или я верю, что Бог избавит меня от них, когда придет время?",
                "Не терял ли я в последнее время объективного восприятия реальности? Не стал ли я думать о себе как о более значимом или более могущественном человеке, чем я есть на самом деле?",
                "Удавалось ли мне воздержаться от действий под влиянием дефекта характера и вместо этого применить духовный принцип? Считаю ли я, что таким образом Бог работает в моей жизни?",
                "Какие недостатки уже исчезли из моей жизни или утратили свою власть надо мной?",
                "Каким образом Седьмой Шаг укрепляет ощущение душевного покоя?",
            ]
        }
    },
    {
        "step": {
            "index": 8,
            "title": "ШАГ ВОСЬМОЙ: Мы составили список всех тех людей, кому мы причинили зло, и преисполнились желанием загладить свою вину перед ними",
            "description": "Восьмой Шаг — это составление списка. Мы определяем, кому мы причинили вред, и готовимся исправить это.",
            "questions": [
                "Смущает ли меня что-нибудь в предстоящей работе по Восьмому Шагу? Что именно?",
                "Понимаю ли я, что важно не торопиться и посоветоваться со спонсором прежде, чем приступать к возмещению ущерба?",
                "Нанес ли я еще больший ущерб в какой-либо ситуации из-за того, что спешил возместить его, не подготовившись? Что это была за ситуация?",
                "Могу ли я сейчас отпустить эти обиды? Если нет, то готов ли я все равно внести эти имена в список и вернуться к ним позже?",
                "Есть ли люди, которым я должен возместить ущерб, но которые могут представлять угрозу моей безопасности или вызывают во мне какое-либо иное беспокойство? Чего именно я боюсь?",
                "Почему просто попросить прощения недостаточно для возмещения причиненного мною ущерба? Почему просто изменить мое поведение недостаточно для возмещения причиненного мною ущерба?",
                "Нанес ли я финансовый ущерб, который не хочу возмещать? Какой была бы моя жизнь, если бы я его уже возместил?",
                "Есть ли в моем списке возмещения люди, которые также нанесли ущерб мне? Что я сделал для того, чтобы обрести готовность возместить этот ущерб?",
                "Почему в Восьмом Шаге так важно определить истинную сущность моих ошибок? Почему так важно, чтобы я четко осознавал свою ответственность?",
                "Какие примеры честности я могу привести из предыдущих шагов? Как я перенесу этот опыт в Восьмой Шаг?",
                "Какие примеры мужества я могу привести из предыдущих шагов? Как я перенесу этот опыт в Восьмой шаг?",
                "Остались ли имена, которые я еще не добавил в свой список? Готов ли я добавить их сейчас?",
                "Я точно никого не пропустил?",
                "Что я сделал для того, чтобы обрести необходимую готовность?",
                "Как я отношусь к необходимости молиться о готовности?",
                "Начинаю ли я чувствовать свою связь с другими людьми?",
                "Начинаю ли я испытывать сострадание и эмпатию к другим людям?",
            ]
        }
    },
    {
        "step": {
            "index": 9,
            "title": "ШАГ ДЕВЯТЫЙ: Мы возместили ущерб, причиненный этим людям, где это было возможно, кроме тех случаев, когда это могло навредить им или кому-то еще",
            "description": "Девятый Шаг — это действие. Мы исправляем то, что можем, с учётом возможных последствий.",
            "questions": [
                "Как моя работа по предыдущим восьми шагам подготовила меня к работе по Девятому Шагу?",
                "Как честность помогает мне в работе по этому шагу?",
                "Как смирение помогает мне в работе по этому шагу?",
                "Что означает фраза «возмещение ущерба»?",
                "Почему возместить ущерб - это больше, чем просто попросить прощения?",
                "Как возмещение ущерба отражает мою преданность непрерывному процессу изменений?",
                "Есть ли у меня какие-нибудь страхи, связанные с возмещением ущерба? Переживаю ли я, что кто-нибудь попытается мне отомстить или отвергнет меня?",
                "Каким образом Девятый Шаг требует нового уровня капитуляции перед программой?",
                "Как насчет финансового ущерба? Верю ли я, что Бог моего понимания обеспечит меня всем необходимым, даже если мне придется чем-то пожертвовать ради возмещения ущерба?",
                "Какие еще страхи или ожидания вызывает у меня предстоящее возмещение ущерба?",
                "Почему то, как люди принимают мое возмещение ущерба, не имеет значения? Как это связано с духовной целью Девятого Шага?",
                "Как я могу использовать в качестве источника силы в этом процессе мою Высшую Силу, спонсора и других зависимых?",
                "Какие случаи в моем списке Восьмого Шага сопровождаются похожими сложными обстоятельствами? Что это за обстоятельства?",
                "Причинил ли я какой-либо ущерб, возмещение которого может повлечь за собой серьезные последствия? Что это за ущерб?",
                "Должен ли я возместить ущерб кому-то, кого уже нет в живых? Какие обстоятельства, связанные с этим человеком, могли бы помочь мне в составлении плана возмещения ущерба?",
                "Какие аспекты своего поведения мне необходимо исправить?",
                "Готов ли я духовно к трудностям, связанным с возмещением ущерба, и к результатам такого возмещения?",
                "Что я сделал, чтобы к этому подготовиться?",
                "Есть ли в моем списке люди, которые тоже причинили мне ущерб?",
                "Всех ли из них я простил? Кого из них я все еще не готов простить? Все ли вышеперечисленные способы я испробовал, чтобы пробудить в себе дух прощения? Что об этом говорит мой спонсор?",
                "Есть ли в моем списке возмещения ущерба пункты, по которым мне трудно довести дело до конца? Что я делаю для того, чтобы подтвердить свою готовность возместить этот ущерб?",
                "Каковы мои ближайшие планы по возмещению ущерба самому себе? Есть ли у меня долгосрочные цели, которые также можно считать возмещением ущерба самому себе? Какие именно? Что я могу предпринять, чтобы их достичь?",
                "Взял ли я на себя ответственность за причиненный ущерб и за его возмещение?",
                "Какие жизненные ситуации помогли мне более отчетливо увидеть тот вред, который я нанес? Как это углубило мое смирение?",
                "Как именно я бескорыстно отдаю или помогаю другим людям?",
                "Какую пользу я получаю от применения принципа прощения на практике? В каких ситуациях мне удалось применить этот принцип?",
                "За что я себя простил?",
                "Что я чувствовал, когда возмещал ущерб? Чему я научился благодаря этому опыту?",
            ]
        }
    },
    {
        "step": {
            "index": 10,
            "title": "ШАГ ДЕСЯТЫЙ: Мы продолжали самоанализ, и когда допускали ошибки, сразу их признавали",
            "description": "Десятый Шаг — это ежедневная практика. Мы продолжаем наблюдать за собой и исправлять ошибки.",
            "questions": [
                "Почему необходимо делать Десятый Шаг?",
                "Почему мы продолжаем проводить личную инвентаризацию?",
                "Как спонсор может помочь мне в этом?",
                "Бывают ли в моей жизни моменты, когда мне трудно увидеть разницу между моими чувствами и моими действиями?",
                "Случалось ли в моем выздоровлении, что я был неправ, но понимал это только спустя время? Что это были за ситуации?",
                "Каким образом мои ошибки влияют на мою собственную жизнь? На жизнь других людей?",
                "Как я понимаю фразу «... и когда совершали ошибки, сразу же признавали это»?",
                "Случалось ли в моем выздоровлении, что я усугублял ситуацию, начав разговор с другим человеком раньше, чем это было необходимо, или свалив вину за свое поведение на другого человека? Что это были за ситуации?",
                "Каким образом незамедлительное признание ошибок помогает мне менять свое поведение?",
                "Были ли в моем выздоровлении случаи, когда я испытывал дискомфорт, признавая, что поступил правильно?",
                "Почему так важно продолжать проводить личную инвентаризацию, пока это не станет привычкой?",
                "Подтвердил ли я сегодня свою веру в любящего и заботливого Бога?",
                "Стремился ли я сегодня обрести руководство своей Высшей Силы? Как именно?",
                "Как я сегодня был полезен другим людям и Богу?",
                "Дал ли мне сегодня Бог что-нибудь такое, за что я могу быть благодарным?",
                "Верю ли я, что моя Высшая Сила может показать мне, как жить и следовать Ее воле?",
                "Вижу ли я в своей сегодняшней жизни старые стереотипы поведения? Если да, то какие именно?",
                "Был ли я обидчивым, эгоистичным, нечестным или трусливым?",
                "Настраивал ли я сам себя на то, чтобы в чем-то разочароваться?",
                "Был ли я добрым и любящим ко всем окружающим?",
                "Беспокоился ли я о вчерашнем или завтрашнем дне?",
                "Позволил ли я себе сегодня впасть в одержимость чем-либо?",
                "Позволил ли я себе быть слишком голодным, злым, одиноким или усталым?",
                "Не отношусь ли я к себе слишком серьезно в какой-то из сфер моей жизни?",
                "Не страдаю ли я от физических, психических или духовных проблем?",
                "Не умолчал ли я о том, чем следовало бы поделиться со спонсором?",
                "Испытывал ли я сегодня крайне сильные чувства? Что это были за чувства, и в связи с чем я их испытывал?",
                "Какие сферы моей жизни являются сегодня проблемными?",
                "Какие дефекты проявились сегодня в моей жизни? Как именно?",
                "Был ли сегодня в моей жизни страх?",
                "Что я сегодня сделал такого, чего лучше было бы не делать?",
                "Что я сегодня не сделал из того, что хотел?",
                "Есть ли у меня готовность меняться?",
                "Возникали ли сегодня конфликты в моих отношениях? Какие именно?",
                "Удалось ли мне сохранить верность своим принципам в отношениях с другими людьми?",
                "Не навредил ли я сегодня, прямо или косвенно, себе или кому-либо еще?",
                "Не следует ли мне извиниться перед кем-либо или возместить кому-либо ущерб?",
                "В чем я ошибся? Что я сделал бы по-другому, если бы мог? Что мне стоит усвоить на будущее?",
                "Остался ли я сегодня чистым?",
                "Был ли я сегодня добрым по отношению к самому себе?",
                "Какие чувства я сегодня испытывал? Как они помогли мне поступить в соответствии с духовными принципами?",
                "Как я сегодня служил другим людям?",
                "О каких сегодняшних поступках я вспоминаю с удовольствием?",
                "Что принесло мне сегодня удовлетворение?",
                "Что я сегодня сделал такого, что обязательно нужно повторить?",
                "Был ли я сегодня на собрании? Общался ли с другими выздоравливающими зависимыми?",
                "За что я сегодня благодарен?",
                "Почему принцип самодисциплины является неотъемлемой частью этого шага?",
                "Как практика принципа самодисциплины в этом шаге влияет на все мое выздоровление?",
                "Как осознание моих ошибок (честность перед собой) помогает мне менять свое поведение?",
                "Случались ли в моем выздоровлении ситуации, когда мне было необходимо практиковать верность принципам? Как я справился с этими ситуациями? В каких случаях я остался доволен собой, а в каких - нет?",
                "Как Десятый Шаг помогает мне жить в настоящем моменте?",
                "Что я начал делать по-другому в результате работы по Десятому Шагу?",
            ]
        }
    },
    {
        "step": {
            "index": 11,
            "title": "ШАГ ОДИННАДЦАТЫЙ: Путём молитвы и медитации мы стремились улучшить наш сознательный контакт с Богом, как мы Его понимали, молясь лишь о знании Его воли для нас и о силе для выполнения этой воли",
            "description": "Одиннадцатый Шаг — это духовная практика. Мы развиваем отношения с Высшей Силой через молитву и медитацию.",
            "questions": [
                "Какой опыт из предыдущих шагов или из жизни дал мне некоторое представление о моей Высшей Силе? Что именно я понял о моей Высшей Силе благодаря этому опыту?",
                "Какими качествами обладает моя Высшая Сила? Что дают эти качества лично мне? Могу ли я испытать их преображающую силу в моей жизни?",
                "Как изменилось мое понимание Высшей Силы с тех пор, как я пришел в АН?",
                "Есть ли у меня какой-то конкретный духовный путь?",
                "В чем разница между религией и духовностью?",
                "Что я предпринял, чтобы исследовать свою духовность?",
                "Сталкивался ли я с предубеждением в Анонимных Наркоманах, когда исследовал свою собственную духовность? Как я себя при этом чувствовал? Что я делал для того, чтобы остаться верным своим убеждениям?",
                "Продолжаю ли я полноценно участвовать в жизни АН вне зависимости от выбранного мной духовного пути?",
                "Как моя вовлеченность в дела Сообщества дополняет мое духовное путешествие?",
                "Как мой духовный путь способствует моему выздоровлению?",
                "Как я молюсь?",
                "Какие чувства вызывает у меня молитва?",
                "Когда я обычно молюсь? Когда мне больно? Или когда мне что-нибудь нужно? Или регулярно?",
                "Как мне может помочь спонтанная молитва в течение дня?",
                "Как молитва помогает мне объективно смотреть на вещи?",
                "Как я медитирую?",
                "Когда я медитирую?",
                "Какие чувства вызывает во мне медитация?",
                "Если я уже какое-то время постоянно медитирую, какие изменения в результате медитации я заметил в своей жизни и самом себе?",
                "При каких обстоятельствах я замечаю присутствие моей Высшей Силы? Что я при этом чувствую?",
                "Что я делаю для улучшения осознанного контакта с Богом моего понимания?",
                "Про какие ситуации из своей жизни я могу сказать, что действовал на своеволии? Каковы были результаты?",
                "Случались ли в моей жизни ситуации, в которых я старался привести свою волю в соответствие с волей Бога? Каковы были результаты?",
                "Какие примеры из моей жизни свидетельствуют о том, что я живу осмысленно и достойно?",
                "Каково мое личное понимание воли Бога для меня?",
                "Почему мы молимся только о знании воли Бога для нас и силах для ее исполнения?",
                "Как это соотносится со смирением?",
                "Как я демонстрирую свою обязательность в работе по Одиннадцатому Шагу и в своем выздоровлении?",
                "Практиковал ли я сегодня молитву и медитацию?",
                "Случалось ли так, что я просил в молитве о чем-то определенном, а получив желаемое, понимал, что мне это совсем не нужно? Опиши подробно.",
                "Сталкивался ли я когда-либо с ситуацией, которая требовала, чтобы я отстаивал свои убеждения ценой личных потерь? Как я поступил? Каковы были результаты?",
                "Получал ли я до сих пор все, что мне необходимо? Что именно я получал?",
            ]
        }
    },
    {
        "step": {
            "index": 12,
            "title": "ШАГ ДВЕНАДЦАТЫЙ: Достигнув духовного пробуждения в результате этих шагов, мы старались донести весть до других зависимых и практиковать эти принципы во всех наших делах",
            "description": "Двенадцатый Шаг — это служение и практика. Мы делимся своим опытом и живём по принципам программы.",
            "questions": [
                "В чем суть того опыта, который я получил в результате работы по шагам?",
                "Как я могу описать мое духовное пробуждение?",
                "Какие устойчивые изменения произошли в моей жизни благодаря тому, что я духовно пробудился?",
                "Какие духовные принципы я связываю с каждым из шагов и какой вклад они внесли в мое духовное пробуждение?",
                "Что для меня означает фраза «духовное пробуждение»?",
                "Как и когда до меня дошла наша весть?",
                "Какое служение я выполняю, чтобы нести нашу весть?",
                "Какие есть способы несения нашей вести? Какие из них применяю лично я?",
                "Каков мой личный стиль спонсорства?",
                "В чем разница между привлекательностью и рекламой?",
                "Что дает мне несение вести?",
                "Какая связь между Пятой Традицией и Двенадцатым Шагом?",
                "Почему я продолжаю возвращаться в программу АН и верить в нее?",
                "Что такое бескорыстное служение? Как я его практикую?",
                "Почему членам АН удалось до меня достучаться, тогда как раньше этого никому не удавалось? Опиши этот опыт.",
                "В чем заключается терапевтическая ценность помощи одного зависимого другому?",
                "Почему идентификация так важна?",
                "Как именно я могу практиковать духовные принципы в разных сферах своей жизни?",
                "В каких ситуациях мне трудно применять духовные принципы?",
                "Какие духовные принципы мне труднее всего практиковать?",
                "Как я применяю принцип безусловной любви по отношению к зависимым, которым пытаюсь помочь?",
                "Каково мое отношение к спонсорству? Поддерживаю ли я своих подспонсорных в принятии ими собственных решений, которые помогут им расти? Даю ли я советы или же делюсь опытом?",
                "Каково мое отношение к служению? Выживет ли сообщество АН без меня?",
                "Как я практикую принцип бескорыстия в служении?",
                "Предан ли я своему выздоровлению? Что я делаю, чтобы продолжать выздоравливать?",
                "Применяю ли я духовные принципы независимо от того, что я чувствую?",
            ]
        }
    }
]


async def initialize_db_and_seed():
    """Initialize or update database with steps and questions."""

    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)
        print("Таблицы проверены/созданы.")

    async with async_session_factory() as session:
        async with session.begin():
            for item in DATA:
                step_data = item["step"]
                step_index = step_data["index"]

                result = await session.execute(
                    select(Step).where(Step.index == step_index)
                )
                existing_step = result.scalar_one_or_none()

                if existing_step:
                    existing_step.title = step_data.get("title")
                    existing_step.description = step_data.get("description")
                    step = existing_step
                    print(f"  📝 Обновлен шаг {step_index}")
                else:
                    step = Step(
                        index=step_index,
                        title=step_data.get("title"),
                        description=step_data.get("description")
                    )
                    session.add(step)
                    await session.flush()
                    print(f"  ✨ Создан шаг {step_index}")

                result = await session.execute(
                    select(Question).where(Question.step_id == step.id)
                )
                existing_questions = {q.text: q for q in result.scalars().all()}

                new_questions = step_data["questions"]
                new_questions_set = set(new_questions)
                existing_questions_set = set(existing_questions.keys())

                if step_index == 1 or step_index == 2 or step_index == 3 or step_index == 4 or step_index == 5 or step_index == 6 or step_index == 7 or step_index == 8 or step_index == 9 or step_index == 10 or step_index == 11 or step_index == 12:
                    from sqlalchemy import delete
                    await session.execute(
                        delete(Question).where(Question.step_id == step.id)
                    )
                    print(f"     ⚠️ Удалены все существующие вопросы (и ответы пользователей) для Шага {step_index}")

                    for q_text in new_questions:
                        new_question = Question(
                            text=q_text,
                            step_id=step.id
                        )
                        session.add(new_question)
                    print(f"     ✅ Добавлено {len(new_questions)} вопросов для Шага {step_index} в правильном порядке")
                else:
                    from sqlalchemy import delete
                    questions_to_remove = existing_questions_set - new_questions_set
                    if questions_to_remove:
                        question_ids_to_remove = [q.id for q_text, q in existing_questions.items() if q_text in questions_to_remove]
                        await session.execute(
                            delete(Question).where(Question.id.in_(question_ids_to_remove))
                        )
                        print(f"     Удалено {len(questions_to_remove)} старых вопросов")

                    questions_to_add = new_questions_set - existing_questions_set
                    for q_text in new_questions:
                        if q_text in questions_to_add:
                            new_question = Question(
                                text=q_text,
                                step_id=step.id
                            )
                            session.add(new_question)

                    if questions_to_add:
                        print(f"     Добавлено {len(questions_to_add)} новых вопросов")

                    if len(existing_questions) != len(new_questions) or questions_to_remove or questions_to_add:
                        print(f"     Всего вопросов в шаге {step_index}: {len(new_questions)}")

        print("✅ Шаги и вопросы успешно инициализированы/обновлены.")


async def force_update_all():
    """Force update all steps and questions (deletes existing and recreates)."""
    from sqlalchemy import delete

    async with engine.begin() as conn:
        await conn.run_sync(Base.metadata.create_all)

    async with async_session_factory() as session:
        async with session.begin():
            await session.execute(delete(Question))
            await session.execute(delete(Step))
            print("🗑️ Удалены существующие шаги и вопросы")

            for item in DATA:
                step_data = item["step"]

                step = Step(
                    index=step_data["index"],
                    title=step_data.get("title"),
                    description=step_data.get("description")
                )
                session.add(step)
                await session.flush()

                for q_text in step_data["questions"]:
                    question = Question(text=q_text, step_id=step.id)
                    session.add(question)

                print(f"  ✅ Создан шаг {step_data['index']} с {len(step_data['questions'])} вопросами")

        print("🎉 Все шаги и вопросы пересозданы!")


if __name__ == "__main__":
    current_path = os.getcwd()
    sys.path.append(current_path)

    import sys
    if len(sys.argv) > 1 and sys.argv[1] == "--force":
        asyncio.run(force_update_all())
    else:
        asyncio.run(initialize_db_and_seed())
