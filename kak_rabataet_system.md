# ๐ ะะะ ะะะะะขะะะข ะกะะกะขะะะ


## ๐๏ธ ะะะฅะะขะะะขะฃะะ ะกะะกะขะะะซ

ะกะธััะตะผะฐ ัะพััะพะธั ะธะท 3 ะพัะฝะพะฒะฝัั ะบะพะผะฟะพะฝะตะฝัะพะฒ (Docker Compose):

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั | ะะพัั | ะะฟะธัะฐะฝะธะต |
|-----------|------------|------|----------|
| PostgreSQL | PostgreSQL 15 | 5432 | ะะฐะทะฐ ะดะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน |
| Backend API | FastAPI (Python 3.11) | 8000 | REST API |
| Telegram Bot | aiogram 3.x | - | ะะฝัะตััะตะนั ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปะตะน |

ะัะต ะบะพะผะฟะพะฝะตะฝัั ัะฐะฑะพัะฐัั ะฒ Docker-ะบะพะฝัะตะนะฝะตัะฐั ะธ ะฒะทะฐะธะผะพะดะตะนััะฒััั ัะตัะตะท ะฒะฝัััะตะฝะฝัั ัะตัั.

---

## ๐ 1. ะะฃะขะะะขะะคะะะะฆะะฏ ะ ะะะะะะะะะ

### ะัะพัะตัั ะฟัะธ ะฟะตัะฒะพะผ ะทะฐะฟััะบะต (`/start`):

1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั `/start` ะฒ Telegram
2. ะะพั ะฒัะทัะฒะฐะตั `/auth/telegram` ะฝะฐ Backend API
3. Backend ัะพะทะดะฐะตั ะฝะพะฒะพะณะพ ะฟะพะปัะทะพะฒะฐัะตะปั ะฒ ะะ ะธะปะธ ะฝะฐัะพะดะธั ัััะตััะฒัััะตะณะพ
4. ะะตะฝะตัะธััะตััั `api_key` (ัะพะบะตะฝ ะดะพัััะฟะฐ) ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั
5. ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ะฝะพะฒัะน โ ะทะฐะฟััะบะฐะตััั ะพะฝะฑะพัะดะธะฝะณ:
   - ะะฐะฟัะฐัะธะฒะฐะตััั ะธะผั (`display_name`)
   - ะะฐะฟัะฐัะธะฒะฐะตััั ะพะฟัั ัะฐะฑะพัั ั ะฟัะพะณัะฐะผะผะพะน (`program_experience`)
   - ะะฐะฟัะฐัะธะฒะฐะตััั ะดะฐัะฐ ััะตะทะฒะพััะธ (`sobriety_date`)
6. ะะพัะปะต ะพะฝะฑะพัะดะธะฝะณะฐ ะฟะพะบะฐะทัะฒะฐะตััั ะณะปะฐะฒะฝะพะต ะผะตะฝั

### ะขะพะบะตะฝ ะธ ะบััะธัะพะฒะฐะฝะธะต:
- ะขะพะบะตะฝ ัะพััะฐะฝัะตััั ะฒ ะฟะฐะผััะธ ะฑะพัะฐ (`TOKEN_STORE`)
- ะัะธ ะบะฐะถะดะพะผ ะทะฐะฟัะพัะต ัะพะบะตะฝ ะฟะตัะตะดะฐะตััั ะฒ ะทะฐะณะพะปะพะฒะบะต `Authorization: Bearer {token}`
- Backend ะฟัะพะฒะตััะตั ัะพะบะตะฝ ะธ ะพะฟัะตะดะตะปัะตั ะฟะพะปัะทะพะฒะฐัะตะปั

---

## ๐ง 2. ะกะะกะขะะะ ะะะะกะะะะะะะะฆะะ

### ะะฐะบ ัะพะฑะธัะฐะตััั ะธะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต:

ะกะธััะตะผะฐ ัะพะฑะธัะฐะตั ะดะฐะฝะฝัะต ะธะท **ะฒัะตั** ะธััะพัะฝะธะบะพะฒ:

| ะััะพัะฝะธะบ | ะงัะพ ัะพะฑะธัะฐะตััั |
|----------|----------------|
| **A. ะะฝะฑะพัะดะธะฝะณ** | ะะผั, ะพะฟัั ัะฐะฑะพัั ั ะฟัะพะณัะฐะผะผะพะน, ะดะฐัะฐ ััะตะทะฒะพััะธ |
| **B. ะัะพัะธะปั** | ะัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั ะฟะพ 13 ัะฐะทะดะตะปะฐะผ + ัะฒะพะฑะพะดะฝัะต ัะตะบััั |
| **C. ะจะฐะณะธ** | ะัะต ะพัะฒะตัั ะฝะฐ ะฒะพะฟัะพัั ะฟะพ 12 ัะฐะณะฐะผ |
| **D. ะะฑััะฝะพะต ะพะฑัะตะฝะธะต** | ะะพัะปะตะดะฝะธะต 20 ัะพะพะฑัะตะฝะธะน, ะฐะฝะฐะปะธะท ัะตัะตะท `analyze_profile()` |

### ะะฐะบ ัะพัะผะธััะตััั ะฟะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะฟัะพะผะฟั:

ะคัะฝะบัะธั `update_personalized_prompt_from_all_answers()`:

```
=== ะะะะะซะ ะะะะะะะะะะ ===
ะะผั: [ะธะผั]
ะะฟัั: [ะพะฟัั]
ะะฐัะฐ ััะตะทะฒะพััะธ: [ะดะฐัะฐ]

=== ะะะคะะะะะฆะะฏ ะะ ะะะะคะะะฏ (ะขะะงะะซะ ะะขะะะขะซ) ===
[ะะฐะทะดะตะป: ะกะตะผัั]
ะะพะฟัะพั: ะะฐะบะฐั ัะพะปั ะฑัะปะฐ ั ัะตะฑั ะฒ ัะตะผัะต?
ะัะฒะตั: [ัะพัะฝัะน ะพัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั]

=== ะะขะะะขะซ ะะ ะจะะะะ ===
[ะจะฐะณ 1: ะัะธะทะฝะฐะฝะธะต]
ะะพะฟัะพั: ...
ะัะฒะตั: ...

=== ะะะคะะะะะฆะะฏ ะะ ะะะซะงะะะะ ะะะฉะะะะฏ ===
[ะกะฒะพะดะบะฐ ะฟะพัะปะตะดะฝะธั ัะพะพะฑัะตะฝะธะน]
```

### ะะพะณะดะฐ ะพะฑะฝะพะฒะปัะตััั ะฟะตััะพะฝะฐะปะธะทะฐัะธั:

ะะฒัะพะผะฐัะธัะตัะบะธ ะฒัะทัะฒะฐะตััั ะฟะพัะปะต:
- ะกะพััะฐะฝะตะฝะธั ะพัะฒะตัะฐ ะฒ ะฟัะพัะธะปะต
- ะกะพััะฐะฝะตะฝะธั ะพัะฒะตัะฐ ะฝะฐ ัะฐะณ
- ะกะพััะฐะฝะตะฝะธั ัะฒะพะฑะพะดะฝะพะณะพ ัะตะบััะฐ
- ะะฑะฝะพะฒะปะตะฝะธั ะฟัะพัะธะปั
- ะะฑััะฝะพะณะพ ัะฐัะฐ (ัะตัะตะท `analyze_profile`)

---

## ๐ฌ 3. ะะะซะงะะซะ ะงะะข

### ะัะพัะตัั ะพะฑัะฐะฑะพัะบะธ ัะพะพะฑัะตะฝะธั:

```
ะกะพะพะฑัะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  a) ะะะะกะกะะคะะะะฆะะฏ                                       โ
โ     - ะะฐะทะฑะธะตะฝะธะต ะฝะฐ ัะฐััะธ                                โ
โ     - ะญะผะพัะธะธ, ะฒะฐะถะฝะพััั (0-100)                          โ
โ     - ะะปะพะบะธ ะดะปั ะฟะฐะผััะธ                                  โ
โ     - thinking_frame, level_of_mind, memory_type        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  b) ะกะะฅะะะะะะะ ะคะะะะะะ                                  โ
โ     - ะ ัะฐะฑะปะธัั frames                                  โ
โ     - ะกะพะทะดะฐะฝะธะต embedding (OpenAI)                       โ
โ     - ะกะพััะฐะฝะตะฝะธะต ะฒ ChromaDB                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  c) ะกะะะะะขะะงะะกะะะ ะะะะกะ (ะะะะะ!)                        โ
โ     - ะะพะธัะบ ะฟะพัะพะถะธั ััะตะนะผะพะฒ ะฟะพะปัะทะพะฒะฐัะตะปั                โ
โ     - ะะพะธัะบ ัะตะปะตะฒะฐะฝัะฝัั ัััะฐัะตะณะธะน ะธะท ัะดัะฐ GPT-SELF      โ
โ     - ะะพะฑะฐะฒะปะตะฝะธะต ะฒ ะบะพะฝัะตะบัั                             โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  d) ะะะะะฃะะะ ะะะะขะะะกะขะ                                  โ
โ     - personalized_prompt ะธะท ะะ                         โ
โ     - ะััะพัะธั ะดะธะฐะปะพะณะฐ                                   โ
โ     - ะะตะปะตะฒะฐะฝัะฝัะต ััะตะนะผั + ัะดัะพ GPT-SELF                โ
โ     - helper_prompt ั ะฒะฐะถะฝัะผะธ ัะพะฑััะธัะผะธ                 โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  e) ะะะะะะะฆะะฏ ะะขะะะขะ                                    โ
โ     - GPT ั ะฟะพะปะฝัะผ ะบะพะฝัะตะบััะพะผ                           โ
โ     - ะะตััะพะฝะฐะปะธะทะธัะพะฒะฐะฝะฝัะน ะพัะฒะตั                         โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
        โ
     ะัะฒะตั ะฟะพะปัะทะพะฒะฐัะตะปั
```

### ะัะพะฑะตะฝะฝะพััะธ:
- โ ะะพั ะฟะพะผะฝะธั ัะพัะฝัะต ะพัะฒะตัั ะธะท ะฟัะพัะธะปั ะธ ะผะพะถะตั ะธั ัะธัะธัะพะฒะฐัั
- โ ะะพั ะฐะดะฐะฟัะธััะตััั ะฝะฐ ะพัะฝะพะฒะต ะฒัะตั ะฒะทะฐะธะผะพะดะตะนััะฒะธะน
- โ ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ ะฝะฐัะพะดะธั ะฟะพัะพะถะธะต ัะพะฑััะธั ะธะท ะฟัะพัะปะพะณะพ
- โ ะกััะฐัะตะณะธะธ ะธะท ัะดัะฐ GPT-SELF ะฟะพะดะฑะธัะฐัััั ะฐะฒัะพะผะฐัะธัะตัะบะธ
- โ ะัะปะธ ะฟัะพัะธะปั ะฝะต ะทะฐะฟะพะปะฝะตะฝ, ะฑะพั ะผัะณะบะพ ะฝะฐะผะตะบะฐะตั, ะฝะพ ะฝะต ััะตะฑัะตั

---

## ๐ 4. ะะะะะขะ ะก ะะะะคะะะะ ("ะะฐััะบะฐะทะฐัั ะพ ัะตะฑะต")

### ะกัััะบัััะฐ ะฟัะพัะธะปั:

| โ | ะะฐะทะดะตะป | ะะพะฟัะพัะพะฒ |
|---|--------|----------|
| 1 | ๐จโ๐ฉโ๐ง ะกะตะผัั | 4 |
| 2 | ๐งโ๐คโ๐ง ะััะทัั | 4 |
| 3 | ๐ ะฃััะฑะฐ | 4 |
| 4 | ๐ง ะะตัััะฒะพ | 4 |
| 5 | โค๏ธ ะัะฑะธะผัะต ะทะฐะฝััะธั | 4 |
| 6 | ๐ฏ ะฅะพะฑะฑะธ | 4 |
| 7 | ๐ผ ะะฐะฑะพัะฐ / ะะตะปะพ | 4 |
| 8 | ๐ค ะะพะดะดะตัะถะบะฐ ััะดะพะผ | 4 |
| 9 | ๐ ะะตะถะธะผ ะธ ะฑัั | 4 |
| 10 | ๐งญ ะฆะตะฝะฝะพััะธ ะธ ะฟัะฐะฒะธะปะฐ | 4 |
| 11 | ๐ ะัะฐะฝะธัั | 4 |
| 12 | ๐ช ะกะธะปัะฝัะต ััะพัะพะฝั | 4 |
| 13 | ๐ฉบ ะะดะพัะพะฒัะต | 4 |
| 14 | โ๏ธ ะกะฒะพะฑะพะดะฝัะน ัะฐััะบะฐะท | - |

### ะัะพัะตัั ะทะฐะฟะพะปะฝะตะฝะธั:

1. ะะพะปัะทะพะฒะฐัะตะปั ะฒัะฑะธัะฐะตั ัะฐะทะดะตะป ะธะท ะผะตะฝั
2. ะะพั ะฟะพะบะฐะทัะฒะฐะตั ะฒะพะฟัะพัั ัะฐะทะดะตะปะฐ
3. ะะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะฐะตั ะฝะฐ ะฒะพะฟัะพัั
4. ะัะฒะตัั ัะพััะฐะฝััััั ะฒ `ProfileAnswer` (ั ะฒะตััะธะพะฝะธัะพะฒะฐะฝะธะตะผ)
5. ะะฒัะพะผะฐัะธัะตัะบะธ ะพะฑะฝะพะฒะปัะตััั ะฟะตััะพะฝะฐะปะธะทะฐัะธั

### ะกะฒะพะฑะพะดะฝัะน ัะฐััะบะฐะท:
- ะะพะถะฝะพ ะดะพะฑะฐะฒะธัั ัะฒะพะฑะพะดะฝัะน ัะตะบัั ะฒ ะบะพะฝะบัะตัะฝัะน ัะฐะทะดะตะป
- ะะปะธ ะพัะฟัะฐะฒะธัั ะพะฑัะธะน ัะฒะพะฑะพะดะฝัะน ัะตะบัั
- ะะฑัะธะน ัะตะบัั ะฐะฝะฐะปะธะทะธััะตััั ัะตัะตะท LLM ะธ ัะฐัะฟัะตะดะตะปัะตััั ะฟะพ ัะฐะทะดะตะปะฐะผ

---

## ๐ 5. ะะะะะขะ ะะ ะจะะะะ (12 ะจะฐะณะพะฒ)

### ะกัััะบัััะฐ:
- 12 ัะฐะณะพะฒ (ะบะฐะถะดัะน ั `title`, `description`, `index`)
- ะะฐะถะดัะน ัะฐะณ ัะพะดะตัะถะธั ะฒะพะฟัะพัั (`Question`)
- ะัะพะณัะตัั: `NOT_STARTED` โ `IN_PROGRESS` โ `COMPLETED`

### ะัะพัะตัั ัะฐะฑะพัั:

1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "12 ะจะฐะณะพะฒ" ะฒ ะผะตะฝั
2. Backend ะพะฟัะตะดะตะปัะตั ัะตะบััะธะน ัะฐะณ ะธ ะฒะพะฟัะพั
3. ะะพั ะฟะพะบะฐะทัะฒะฐะตั ะฒะพะฟัะพั ั ะธะฝะดะธะบะฐัะพัะพะผ ะฟัะพะณัะตััะฐ:
   ```
   ะจะฐะณ 1 ะธะท 12 | ะะพะฟัะพั 3 ะธะท 10
   [ะะฟะธัะฐะฝะธะต ัะฐะณะฐ]
   [ะขะตะบัั ะฒะพะฟัะพัะฐ]
   ```
4. ะะพะปัะทะพะฒะฐัะตะปั ะพัะฒะตัะฐะตั
5. ะัะฒะตั ัะพััะฐะฝัะตััั, ะฟะตััะพะฝะฐะปะธะทะฐัะธั ะพะฑะฝะพะฒะปัะตััั
6. ะะพะบะฐะทัะฒะฐะตััั ัะปะตะดัััะธะน ะฒะพะฟัะพั

### ะะฐะฒะธะณะฐัะธั:
- โ ะัะฑะพั ะบะพะฝะบัะตัะฝะพะณะพ ัะฐะณะฐ ะธะท ัะฟะธัะบะฐ
- โ ะัะฑะพั ะบะพะฝะบัะตัะฝะพะณะพ ะฒะพะฟัะพัะฐ
- โ ะกะพััะฐะฝะตะฝะธะต ัะตัะฝะพะฒะธะบะฐ
- โ ะะพะทะฒัะฐั ะฒ ะณะปะฐะฒะฝะพะต ะผะตะฝั

---

## ๐งฉ 6. ะะะะกะกะะคะะะะฆะะฏ ะ ะคะะะะะซ

### ะะปะฐััะธัะธะบะฐัะธั ัะพะพะฑัะตะฝะธะน (`classify.json`):

ะะฐะถะดะพะต ัะพะพะฑัะตะฝะธะต ะฐะฝะฐะปะธะทะธััะตััั ัะตัะตะท GPT:

| ะะพะปะต | ะะฟะธัะฐะฝะธะต | ะัะธะผะตั |
|------|----------|--------|
| `parts` | ะงะฐััะธ ัะพะพะฑัะตะฝะธั | ["ั ัะพัะฒะฐะปัั", "ะฟะพััะณะฐะปัั ั ะถะตะฝะพะน"] |
| `emotion` | ะญะผะพัะธั | "ะะธะฝะฐ", "ะกััะด" |
| `importance` | ะะฐะถะฝะพััั 0-100 | 85 |
| `blocks` | ะะปะพะบะธ ะดะปั ะฟะฐะผััะธ | ["ะะปะบะพะณะพะปั", "ะกะตะผัั"] |
| `thinking_frame` | ะะพะณะฝะธัะธะฒะฝัะน ะฟะฐััะตัะฝ | "ะธะผะฟัะปัั + ะฟะตัะปั" |
| `level_of_mind` | ะฃัะพะฒะตะฝั ะพัะพะทะฝะฐะฝะฝะพััะธ | 40 |
| `memory_type` | ะขะธะฟ ะฟะฐะผััะธ | "dynamic" |
| `action` | ะะตะบะพะผะตะฝะดัะตะผะพะต ะดะตะนััะฒะธะต | "trigger_strategy" |
| `strategy_hint` | ะะพะดัะบะฐะทะบะฐ | "ะัะตะดะปะพะถะธัั ะฒะตัะฝััััั ะบ ัะฐะณั 1" |

### ะกะพััะฐะฝะตะฝะธะต ััะตะนะผะพะฒ:

1. ะะฐะถะฝัะต ัะฐััะธ ัะพััะฐะฝััััั ะฒ ัะฐะฑะปะธัั `frames`
2. ะกะพะทะดะฐะตััั embedding ัะตัะตะท OpenAI (`text-embedding-3-small`)
3. Embedding ัะพััะฐะฝัะตััั ะฒ ChromaDB
4. ะัะธ ัะปะตะดัััะธั ะดะธะฐะปะพะณะฐั โ ัะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ

---

## ๐ 7. ะะะะขะะะะะ ะฅะะะะะะะฉะ ะ ะกะะะะะขะะงะะกะะะ ะะะะกะ

### ะััะธัะตะบัััะฐ ChromaDB:

```
ChromaDB
โโโ frames                 # ะคัะตะนะผั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โโโ frame_id          # ID ะธะท ะะ
โ   โโโ user_id           # ID ะฟะพะปัะทะพะฒะฐัะตะปั
โ   โโโ emotion           # ะญะผะพัะธั
โ   โโโ blocks            # ะะปะพะบะธ
โ   โโโ embedding         # ะะตะบัะพั 1536 ะธะทะผะตัะตะฝะธะน
โ
โโโ gpt_self_core         # ะฏะดัะพ GPT-SELF (20+ ัะฐะฝะบะพะฒ)
    โโโ identity          # ะะดะตะฝัะธัะฝะพััั ัะธััะตะผั
    โโโ memory_types      # ะขะธะฟั ะฟะฐะผััะธ
    โโโ thinking_levels   # ะฃัะพะฒะฝะธ ะผััะปะตะฝะธั
    โโโ blocks            # ะะปะพะบะธ ัะธััะตะผั
    โโโ strategies        # ะกััะฐัะตะณะธะธ (ะบัะธะทะธั, ััะณะฐ, ัััะด, ัััะฒ)
    โโโ patterns          # ะะฐััะตัะฝั ะผััะปะตะฝะธั
```

### ะะฐะบ ัะฐะฑะพัะฐะตั ัะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ:

1. **ะัะธ ะฟะพะปััะตะฝะธะธ ัะพะพะฑัะตะฝะธั:**
   - ะกะพะทะดะฐะตััั embedding ะดะปั ัะพะพะฑัะตะฝะธั
   - ะะพะธัะบ ะฒ `frames` โ ะฟะพัะพะถะธะต ัะพะฑััะธั ะฟะพะปัะทะพะฒะฐัะตะปั
   - ะะพะธัะบ ะฒ `gpt_self_core` โ ัะตะปะตะฒะฐะฝัะฝัะต ัััะฐัะตะณะธะธ

2. **ะัะธะผะตั:**
   - ะกะพะพะฑัะตะฝะธะต: "ะะตะฝั ัััััั, ะฝะต ะผะพะณั ะพััะฐะฝะพะฒะธัััั"
   - ะะฐะนะดะตะฝั ััะตะนะผั: ััะณะฐ, ะฟะฐะฝะธะบะฐ (ะธะท ะธััะพัะธะธ ะฟะพะปัะทะพะฒะฐัะตะปั)
   - ะะฐะนะดะตะฝะฐ ัััะฐัะตะณะธั: "ะัะธ ััะณะต โ HALT-ะฟัะพะฒะตัะบะฐ โ ะทะฐะผะตะดะปะตะฝะธะต โ ะบะพะฝัะฐะบั"
   - ะะพะฝัะตะบัั ะดะพะฑะฐะฒะปัะตััั ะฒ ะฟัะพะผะฟั ะดะปั GPT

### ะฏะดัะพ GPT-SELF ัะพะดะตัะถะธั:

| ะะฐัะตะณะพัะธั | ะกะพะดะตัะถะฐะฝะธะต |
|-----------|------------|
| ะะดะตะฝัะธัะฝะพััั | GPT-SELF ะบะฐะบ ััััะบัััะฐ ะฒัะพัะพะน ะณะพะปะพะฒั |
| ะขะธะฟั ะฟะฐะผััะธ | stable, dynamic, volatile |
| ะฃัะพะฒะฝะธ ะผััะปะตะฝะธั | 10% ะฐะฒัะพะผะฐัะธะทะผ โ 100% ะฟะพะปะฝะพะต ะฒะพัะฟัะธััะธะต |
| ะะปะพะบะธ | 12 ัะฐะณะพะฒ, ะััะปะตะฝะธะต, ะกะพััะพัะฝะธั, ะะธัะฝะพััั, ะัะดะธ |
| ะกััะฐัะตะณะธะธ | ะัะธะทะธั, ััะณะฐ, ัััะด/ะฒะธะฝะฐ, ัััะฒ |
| ะะฐััะตัะฝั | ะะตัะปะธ ะผััะปะตะฝะธั, ะบะพะณะฝะธัะธะฒะฝัะต ะธัะบะฐะถะตะฝะธั |

---

## ๐ 8. ะขะะะะะ ะ ะะะะะะ ะขะะะะะะ (ะะะะะ!)

### TrackerSummary โ ะตะถะตะดะฝะตะฒะฝะพะต ะพััะปะตะถะธะฒะฐะฝะธะต:

| ะะฐัะตะณะพัะธั | ะงัะพ ะพััะปะตะถะธะฒะฐะตััั |
|-----------|-------------------|
| `thinking` | ะััะปะธ, ะฟะฐััะตัะฝั ะผััะปะตะฝะธั |
| `feeling` | ะงัะฒััะฒะฐ, ัะผะพัะธะธ |
| `behavior` | ะะพะฒะตะดะตะฝะธะต, ะดะตะนััะฒะธั |
| `relationships` | ะัะฝะพัะตะฝะธั, ะบะพะฝัะฐะบัั |
| `health` | ะะดะพัะพะฒัะต, ัะฐะผะพััะฒััะฒะธะต |

### ะะพะฒัะต ะฒะพะทะผะพะถะฝะพััะธ:

```python
# ะะพะปััะธัั ะทะฐะฟะธัะธ ะทะฐ ะฟะตัะธะพะด
summaries = await tracker_service.get_summaries_for_period(
    user_id, start_date, end_date
)

# ะะณัะตะณะธัะพะฒะฐัั ะฟะพ ะบะฐัะตะณะพัะธัะผ
aggregated = await tracker_service.aggregate_by_category(
    user_id, start_date, end_date
)
# ะะตะทัะปััะฐั: {"thinking": [...], "feeling": [...], ...}

# ะะฝะฐะปะธะท ััะตะฝะดะพะฒ ะทะฐ 7 ะดะฝะตะน
trends = await tracker_service.get_trends(user_id, days=7)
# ะะตะทัะปััะฐั: {
#   "most_common": {"feeling": [("ััะตะฒะพะณะฐ", 5), ("ะณััััั", 3)]},
#   "daily_counts": [...],
#   "categories_filled": {"thinking": true, "feeling": true, ...}
# }
```

---

## ๐ 9. SOS ะะะะะฉะฌ

### ะัะพัะตัั:

1. ะะพะปัะทะพะฒะฐัะตะปั ะฝะฐะถะธะผะฐะตั "SOS" ะฒ ะผะตะฝั
2. ะัะฑะธัะฐะตั ัะธะฟ ะฟะพะผะพัะธ:
   - `question` โ ะฝะต ะฟะพะฝะธะผะฐั ะฒะพะฟัะพั
   - `memory` โ ะฝะต ะผะพะณั ะฒัะฟะพะผะฝะธัั ัะธััะฐัะธั
   - `formulation` โ ะฝะต ะผะพะณั ััะพัะผัะปะธัะพะฒะฐัั
   - `support` โ ะฝัะถะฝะฐ ะฟะพะดะดะตัะถะบะฐ
   - `custom` โ ัะฒะพะน ัะตะบัั
3. ะกะพะทะดะฐะตััั SOS-ัะตััะธั ั ัะพััะฐะฝะตะฝะธะตะผ ะธััะพัะธะธ
4. ะะพั ะธัะฟะพะปัะทัะตั ัะฟะตัะธะฐะปัะฝัะน SOS-ะฟัะพะผะฟั
5. ะะตััะพะฝะฐะปะธะทะฐัะธั ะฟัะธะผะตะฝัะตััั

### ะัะพะฑะตะฝะฝะพััะธ:
- โ ะัะธะพัะธัะตั ัะผะพัะธะพะฝะฐะปัะฝะพะน ะฟะพะดะดะตัะถะบะธ ะฝะฐะด ะฐะฝะฐะปะธะทะพะผ
- โ ะะตััะพะฝะฐะปะธะทะฐัะธั ัะพััะฐะฝัะตััั
- โ ะััะพัะธั ะดะธะฐะปะพะณะฐ ัะพััะฐะฝัะตััั
- โ ะะพะถะฝะพ ะฒะตัะฝััััั ะฟะพะทะถะต

---

## ๐พ 10. ะะะะ ะะะะะซะฅ

### ะัะฝะพะฒะฝัะต ัะฐะฑะปะธัั:

| ะััะฟะฟะฐ | ะขะฐะฑะปะธัั |
|--------|---------|
| ะะพะปัะทะพะฒะฐัะตะปะธ | `users` |
| ะัะพัะธะปั | `profile_sections`, `profile_questions`, `profile_answers`, `profile_section_data` |
| ะจะฐะณะธ | `steps`, `step_questions`, `step_answers`, `user_steps` |
| ะะฐะผััั | `frames`, `blocks`, `blocks_frames` |
| ะััะพัะธั | `messages` |
| ะกะตััะธะธ | `session_contexts`, `session_states` |
| ะขัะตะบะตั | `tracker_summaries` |
| ะกะปัะถะตะฑะฝัะต | `answer_templates`, `frame_tracking`, `qa_status`, `user_meta`, `tails` |

### ะะธะณัะฐัะธะธ Alembic:
- โ ะัะต ะผะธะณัะฐัะธะธ ะธะดะตะผะฟะพัะตะฝัะฝั
- โ ะัะพะฒะตััะตััั ัััะตััะฒะพะฒะฐะฝะธะต ัะฐะฑะปะธั/ะบะพะปะพะฝะพะบ
- โ ะขะตะบััะฐั ะฒะตััะธั: `j7a8b9c0d1e2` (head)
- โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะฟัะธะผะตะฝะตะฝะธะต ะฟัะธ ะทะฐะฟััะบะต

---

## ๐ 11. ะะะะะซะ ะฆะะะ ะะะะะะะะะะกะขะะะฏ

### ะัะธะผะตั: ัะพะพะฑัะตะฝะธะต "ะะตะฝั ัััััั ะฟะพัะปะต ััะพัั ั ะถะตะฝะพะน"

```
1. ะะะะกะกะะคะะะะฆะะฏ
   โโโ parts: ["ะะตะฝั ัััััั", "ะฟะพัะปะต ััะพัั ั ะถะตะฝะพะน"]
   โโโ emotions: ["ะขัะตะฒะพะณะฐ", "ะะฝะตะฒ"]
   โโโ blocks: ["ะกะพััะพัะฝะธั", "ะกะตะผัั", "ะัะฝะพัะตะฝะธั"]
   โโโ thinking_frame: "ะธะผะฟัะปัั + ะฟะตัะปั"
   โโโ level_of_mind: 50

2. ะกะะฅะะะะะะะ ะคะะะะะะ
   โโโ Frame 1: "ะะตะฝั ัััััั" โ embedding โ ChromaDB
   โโโ Frame 2: "ััะพัะฐ ั ะถะตะฝะพะน" โ embedding โ ChromaDB

3. ะกะะะะะขะะงะะกะะะ ะะะะกะ
   โโโ Frames: [ะฟัะตะดัะดััะธะต ัะฟะธะทะพะดั ััะณะธ, ะบะพะฝัะปะธะบัั]
   โโโ Core: [ัััะฐัะตะณะธั HALT, ัะฐะฑะพัะฐ ั ััะณะพะน]

4. ะะะะขะะะกะข
   โโโ personalized_prompt: [ะฒัั ะธะฝัะพัะผะฐัะธั ะพ ะฟะพะปัะทะพะฒะฐัะตะปะต]
   โโโ helper_prompt: [ัะตะปะตะฒะฐะฝัะฝัะต ััะตะนะผั + ัััะฐัะตะณะธะธ]
   โโโ history: [ะฟะพัะปะตะดะฝะธะต ัะพะพะฑัะตะฝะธั]

5. ะะะะะะะฆะะฏ
   โโโ GPT ั ะฟะพะปะฝัะผ ะบะพะฝัะตะบััะพะผ
   โโโ ะัะฒะตั: "ะฏ ะฒะธะถั, ััะพ ัะตะนัะฐั ััะถะตะปะพ. ะะฐะฒะฐะน ัะฝะฐัะฐะปะฐ 
              ะฟัะพะฒะตัะธะผ HALT: ัั ะณะพะปะพะดะตะฝ? ัััะฐะป? 
              ะะพะผะฝั, ัั ะณะพะฒะพัะธะป ะพ ะบะพะฝัะปะธะบัะฐั ั ะถะตะฝะพะน ัะฐะฝััะต..."

6. ะกะะฅะะะะะะะ
   โโโ Message (user): "ะะตะฝั ัััััั ะฟะพัะปะต ััะพัั ั ะถะตะฝะพะน"
   โโโ Message (assistant): [ะพัะฒะตั ะฑะพัะฐ]
   โโโ ะะฑะฝะพะฒะปะตะฝะธะต ะฟะตััะพะฝะฐะปะธะทะฐัะธะธ
```

---

## โ ะะะฎะงะะะซะ ะะกะะะะะะะกะขะ ะกะะกะขะะะซ

### 1. ะะพะปะฝะฐั ะฟะตััะพะฝะฐะปะธะทะฐัะธั
- โ ะะฐะฝะฝัะต ะธะท ะฒัะตั ะธััะพัะฝะธะบะพะฒ (ะพะฝะฑะพัะดะธะฝะณ + ะฟัะพัะธะปั + ัะฐะณะธ + ัะฐั)
- โ ะะพั ะฟะพะผะฝะธั ัะพัะฝัะต ะพัะฒะตัั ะธ ัะธัะธััะตั ะธั
- โ ะะดะฐะฟัะฐัะธั ะฝะฐ ะพัะฝะพะฒะต ะฒัะตั ะฒะทะฐะธะผะพะดะตะนััะฒะธะน

### 2. ะกะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ (ะะะะะ!)
- โ ะะพะธัะบ ะฟะพัะพะถะธั ัะพะฑััะธะน ะธะท ะธััะพัะธะธ ะฟะพะปัะทะพะฒะฐัะตะปั
- โ ะะพะดะฑะพั ัะตะปะตะฒะฐะฝัะฝัั ัััะฐัะตะณะธะน ะธะท ัะดัะฐ GPT-SELF
- โ ะะพะฝัะตะบัั ะพะฑะพะณะฐัะฐะตััั ะฐะฒัะพะผะฐัะธัะตัะบะธ

### 3. ะฃะผะฝะฐั ะบะปะฐััะธัะธะบะฐัะธั
- โ ะะฝะฐะปะธะท ะบะฐะถะดะพะณะพ ัะพะพะฑัะตะฝะธั
- โ ะะทะฒะปะตัะตะฝะธะต ัะผะพัะธะน, ะฟะฐััะตัะฝะพะฒ, ัััะฐัะตะณะธะน
- โ ะะฐััะธัะตะฝะฝัะต ะฟะพะปั (thinking_frame, level_of_mind)

### 4. ะขัะตะบะตั ะธ ััะตะฝะดั (ะะะะะ!)
- โ ะะถะตะดะฝะตะฒะฝะพะต ะพััะปะตะถะธะฒะฐะฝะธะต ะฟะพ 5 ะบะฐัะตะณะพัะธัะผ
- โ ะะณัะตะณะฐัะธั ะดะฐะฝะฝัั ะทะฐ ะฟะตัะธะพะด
- โ ะะฝะฐะปะธะท ััะตะฝะดะพะฒ ะธ ัะฐัััั ัะตะผ

### 5. ะะธะฑะบะฐั ัะฐะฑะพัะฐ
- โ ะะฐะฑะพัะฐ ะฟะพ ัะฐะณะฐะผ ั ะฟัะพะณัะตััะพะผ
- โ ะะฐะฟะพะปะฝะตะฝะธะต ะฟัะพัะธะปั ะฟะพ ัะฐะทะดะตะปะฐะผ
- โ ะกะฒะพะฑะพะดะฝะพะต ะพะฑัะตะฝะธะต
- โ SOS ะฟะพะผะพัั ะฒ ะบัะธะทะธัะต

### 6. ะะฐะดะตะถะฝะพััั
- โ ะะดะตะผะฟะพัะตะฝัะฝัะต ะผะธะณัะฐัะธะธ
- โ ะะฑัะฐะฑะพัะบะฐ ะพัะธะฑะพะบ
- โ ะกะพััะฐะฝะตะฝะธะต ะฒ ะะ

---

## ๐ ะขะะฅะะะงะะกะะะ ะกะขะะ

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั |
|-----------|------------|
| Backend | FastAPI (Python 3.11) |
| ORM | SQLAlchemy (async) |
| ะะธะณัะฐัะธะธ | Alembic |
| Database | PostgreSQL 15 |
| LLM | OpenAI GPT-4o, text-embedding-3-small |
| Vector Store | ChromaDB |
| Bot | aiogram 3.x |
| Infrastructure | Docker Compose |




